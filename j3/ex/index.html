<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Star Wars Characters</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #000;
      color: #ffe81f;
      text-align: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
      min-height: 100vh;
    }

   
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      z-index: -1;
      overflow: hidden;
    }
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite alternate;
    }
    @keyframes twinkle {
      from { opacity: 0.2; }
      to { opacity: 1; }
    }

    .container {
      max-width: 500px;
      margin: auto;
      position: relative;
      z-index: 1;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #ffe81f;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 20px;
    }
    button:hover {
      background: #ffcc00;
    }
    #loading {
      margin: 20px 0;
      font-size: 18px;
    }
    #error {
      color: red;
      margin: 20px 0;
    }
    .card {
      border: 1px solid #ffe81f;
      border-radius: 10px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <div class="stars" id="stars"></div>

  <div class="container">
    <h1>⭐ Star Wars Characters ⭐</h1>

    <button id="getCharacter">Get Random Character</button>

    <div id="loading" class="hidden">
      <i class="fas fa-spinner fa-spin"></i> Loading...
    </div>

    <div id="error" class="hidden"></div>

    <div id="characterInfo" class="card hidden">
      <h2 id="name"></h2>
      <p><strong>Height:</strong> <span id="height"></span></p>
      <p><strong>Gender:</strong> <span id="gender"></span></p>
      <p><strong>Birth Year:</strong> <span id="birth_year"></span></p>
      <p><strong>Home World:</strong> <span id="homeworld"></span></p>
    </div>
  </div>

  <script>
    const button = document.getElementById("getCharacter");
    const loading = document.getElementById("loading");
    const errorMsg = document.getElementById("error");
    const card = document.getElementById("characterInfo");

    const nameEl = document.getElementById("name");
    const heightEl = document.getElementById("height");
    const genderEl = document.getElementById("gender");
    const birthYearEl = document.getElementById("birth_year");
    const homeworldEl = document.getElementById("homeworld");

   
    const starsContainer = document.getElementById("stars");
    const numStars = 400; 
    for (let i = 0; i < numStars; i++) {
      const star = document.createElement("div");
      star.classList.add("star");
     
      star.style.top = Math.random() * 100 + "%";
      star.style.left = Math.random() * 100 + "%";
      
      const size = Math.random() * 2 + 1;
      star.style.width = size + "px";
      star.style.height = size + "px";
      
      star.style.animationDuration = (1 + Math.random() * 3) + "s";
      starsContainer.appendChild(star);
    }

    
    async function getCharacter() {
      errorMsg.classList.add("hidden");
      card.classList.add("hidden");
      loading.classList.remove("hidden");

      try {
        const randomId = Math.floor(Math.random() * 83) + 1;

        const response = await fetch(`https://www.swapi.tech/api/people/${randomId}`);
        if (!response.ok) throw new Error("Failed to fetch character");
        const data = await response.json();
        const char = data.result.properties;

        const homeworldResponse = await fetch(char.homeworld);
        const homeworldData = await homeworldResponse.json();

        nameEl.textContent = char.name;
        heightEl.textContent = char.height + " cm";
        genderEl.textContent = char.gender;
        birthYearEl.textContent = char.birth_year;
        homeworldEl.textContent = homeworldData.result.properties.name;

        loading.classList.add("hidden");
        card.classList.remove("hidden");

      } catch (error) {
        console.error(error);
        loading.classList.add("hidden");
        errorMsg.textContent = "Oops! Could not load character. Try again!";
        errorMsg.classList.remove("hidden");
      }
    }

    button.addEventListener("click", getCharacter);
  </script>
</body>
</html>
